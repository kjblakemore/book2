<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book <i>HCI Big Data Course - Weeks 7-8</i> -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Q2 | &lt;i&gt;HCI Big Data Course - Weeks 7-8&lt;/i&gt;</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.0-beta.4">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-bigdata/highlight.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-bigdata/bigdata.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-bigdata/jquery.jsonview.css">
        
    
        
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../learning/week8/q3.html" />
    
    
    <link rel="prev" href="../../learning/week8/q1.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book" data-level="1.2.3" data-basepath="../.." data-revision="Fri Jan 29 2016 11:27:16 GMT-0700 (MST)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="learning/index.html">
            
                
                    <a href="../../learning/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Learning
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="learning/week7/index.html">
            
                
                    <a href="../../learning/week7/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Week 7
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="learning/week7/netapp.html">
            
                
                    <a href="../../learning/week7/netapp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.1.</b>
                        
                        NetApp
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="learning/week7/jquery-click.html">
            
                
                    <a href="../../learning/week7/jquery-click.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.2.</b>
                        
                        Click
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="learning/week7/jquery-form.html">
            
                
                    <a href="../../learning/week7/jquery-form.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.3.</b>
                        
                        Form
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="learning/week7/jquery-load.html">
            
                
                    <a href="../../learning/week7/jquery-load.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.4.</b>
                        
                        Load
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="learning/week7/pokemon.html">
            
                
                    <a href="../../learning/week7/pokemon.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.5.</b>
                        
                        Pokemon
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="learning/week7/pokemon-form.html">
            
                
                    <a href="../../learning/week7/pokemon-form.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.6.</b>
                        
                        Pokemon (Form)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="learning/week7/fcq.html">
            
                
                    <a href="../../learning/week7/fcq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.7.</b>
                        
                        FCQ
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="learning/week8/index.html">
            
                
                    <a href="../../learning/week8/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Week 8
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="learning/week8/team.html">
            
                
                    <a href="../../learning/week8/team.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.1.</b>
                        
                        Team
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="learning/week8/q1.html">
            
                
                    <a href="../../learning/week8/q1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.2.</b>
                        
                        Q1
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.2.3" data-path="learning/week8/q2.html">
            
                
                    <a href="../../learning/week8/q2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.3.</b>
                        
                        Q2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="learning/week8/q3.html">
            
                
                    <a href="../../learning/week8/q3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.4.</b>
                        
                        Q3
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="hackathons/index.html">
            
                
                    <a href="../../hackathons/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Hackathons
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="hackathons/netapp/index.html">
            
                
                    <a href="../../hackathons/netapp/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        NetApp
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="hackathons/yelp/index.html">
            
                
                    <a href="../../hackathons/yelp/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Yelp
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="hackathons/yelp/warmup.html">
            
                
                    <a href="../../hackathons/yelp/warmup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.1.</b>
                        
                        Warmup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="hackathons/yelp/questions.html">
            
                
                    <a href="../../hackathons/yelp/questions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.2.</b>
                        
                        Questions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="hackathons/yelp/ui.html">
            
                
                    <a href="../../hackathons/yelp/ui.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.3.</b>
                        
                        UI
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >&lt;i&gt;HCI Big Data Course - Weeks 7-8&lt;/i&gt;</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="individual-2-of-3">Individual 2 of 3</h1>
<h2 id="is-there-a-relationship-between-number-of-attributes-and-star-count">Is there a relationship between Number of Attributes and Star Count?</h2>
<div style="border:1px grey solid; padding:5px;">
    <div><h5>Enter State abbreviatioin</h5> (SC, IL, WI, NC, PA, AZ or ALL)
        <input id="state" type="text" value="PA">
    </div>
    <div><h5>Enter City Name</h5> (City Name or ALL)
        <input id="city" type="text" value="ALL">
    </div>
    <div><h5>Enter Category</h5> (Category or ALL)
        <input id="category" type="text" value="ALL">
    </div> 
    <div><h5>Enter Maximum Number of Attributes</h5> (Number or NONE)
        <input id="attributes" type="text" value="NONE">
    </div>       
    <div style="margin:20px;">
        <button id="viz">Visualize</button>
    </div>
</div>

<p>The chart below, shows the distribution of Number of Attributes (X-axis), across star counts (Y-axis).  In general, the star counts range from 1 to 5.  Attributes are optional and have a wide range of values, from the variety of alcohol served and noise level to whether appointments are necessary and if credit cards are accepted.  The maximum number of attributes is generally about 30.</p>
<div class="myviz" style="width:100%; height:600px; border: 1px black solid; padding: 5px;">
Data is not loaded yet
</div>

<p><pre><code>items = &apos;not loaded yet&apos;

$.get(&apos;http://bigdatahci2015.github.io/data/yelp/yelp_academic_dataset_business.5000.json.lines.txt&apos;)
    .success(function(data){        
        var lines = data.trim().split(&apos;\n&apos;)

        // convert text lines to json arrays and save them in `items`
        items = _.map(lines, JSON.parse)
     })
     .error(function(e){
         console.error(e)
     })

function viz(state, city, category, attributes){ 
    // define a template string
    var tplString = &apos;&lt;g&gt; \
    				&lt;circle cx=&quot;${d.x}&quot; \
    				cy=&quot;${d.y}&quot; \
    				r=&quot;4&quot; \
    				stroke=&quot;black&quot; \
    				fill=&quot;red&quot; /&gt; \
                    &lt;/g&gt;&apos;

    // compile the string to get a template function
    var template = _.template(tplString)

    // Filter all entries for the specified state, city and category
    var itemsFiltered = _.filter(items, function(d) {
    	return (state == &apos;ALL&apos; || d.state == state) &amp;&amp; 
            (city == &apos;ALL&apos; || d.city == city ) &amp;&amp; 
            (category == &apos;ALL&apos; || _.includes(d.categories, category))
    })

    // Next, extract star rating and number of attributes
    var attributeRatingPairs = _.map(itemsFiltered, function(d) {
    	return [_.keys(d.attributes).length, d.stars]
    	})

    // minStar and maxStar, only used for debug
    var minStar = _.min(_.unzip(attributeRatingPairs)[1])
    var maxStar = _.max(_.unzip(attributeRatingPairs)[1])

    var maxAttribute = 
        attributes == &apos;NONE&apos; ? _.max(_.unzip(attributeRatingPairs)[0]): attributes

    // X coordinate is the number of attributes, shifted 20 points to right
    function computeX(d, i) {
        return d[0] * 600 / maxAttribute + 20
    }

    // Y coordinate is the scaled star count, translated to an origin at lower left 
    // corner, with jitter
    function computeY(d, i) {
    	return 600 - 100 * (d[1] + Math.random() - .5)
    }

    var viz = _.map(attributeRatingPairs, function(d, i){                
                return {
                    x: computeX(d, i),
                    y: computeY(d, i)
                }
             })

    var result = _.map(viz, function(d){
             // invoke the compiled template function on each viz data
             return template({d: d})
         })

    $(&apos;.myviz&apos;).html(&apos;&lt;svg width=&quot;100%&quot; height=&quot;100%&quot;&gt;&apos; + result + &apos;&lt;/svg&gt;&apos;)
}

$(&apos;button#viz&apos;).click(function(){    
    var state = $(&apos;input#state&apos;).val()
    var city = $(&apos;input#city&apos;).val()
    var category = $(&apos;input#category&apos;).val() 
    var attributes = $(&apos;input#attributes&apos;).val()
    viz(state, city, category, attributes)
})</code></pre><script>var code ="items = 'not loaded yet'\n\n$.get('http://bigdatahci2015.github.io/data/yelp/yelp_academic_dataset_business.5000.json.lines.txt')\n    .success(function(data){        \n        var lines = data.trim().split('\\n')\n\n        // convert text lines to json arrays and save them in `items`\n        items = _.map(lines, JSON.parse)\n     })\n     .error(function(e){\n         console.error(e)\n     })\n\nfunction viz(state, city, category, attributes){ \n    // define a template string\n    var tplString = '<g> \\\n    \t\t\t\t<circle cx=\"${d.x}\" \\\n    \t\t\t\tcy=\"${d.y}\" \\\n    \t\t\t\tr=\"4\" \\\n    \t\t\t\tstroke=\"black\" \\\n    \t\t\t\tfill=\"red\" /> \\\n                    </g>'\n\n    // compile the string to get a template function\n    var template = _.template(tplString)\n\n    // Filter all entries for the specified state, city and category\n    var itemsFiltered = _.filter(items, function(d) {\n    \treturn (state == 'ALL' || d.state == state) && \n            (city == 'ALL' || d.city == city ) && \n            (category == 'ALL' || _.includes(d.categories, category))\n    })\n\n    // Next, extract star rating and number of attributes\n    var attributeRatingPairs = _.map(itemsFiltered, function(d) {\n    \treturn [_.keys(d.attributes).length, d.stars]\n    \t})\n\n    // minStar and maxStar, only used for debug\n    var minStar = _.min(_.unzip(attributeRatingPairs)[1])\n    var maxStar = _.max(_.unzip(attributeRatingPairs)[1])\n\n    var maxAttribute = \n        attributes == 'NONE' ? _.max(_.unzip(attributeRatingPairs)[0]): attributes\n\n    // X coordinate is the number of attributes, shifted 20 points to right\n    function computeX(d, i) {\n        return d[0] * 600 / maxAttribute + 20\n    }\n\n    // Y coordinate is the scaled star count, translated to an origin at lower left \n    // corner, with jitter\n    function computeY(d, i) {\n    \treturn 600 - 100 * (d[1] + Math.random() - .5)\n    }\n\n    var viz = _.map(attributeRatingPairs, function(d, i){                \n                return {\n                    x: computeX(d, i),\n                    y: computeY(d, i)\n                }\n             })\n\n    var result = _.map(viz, function(d){\n             // invoke the compiled template function on each viz data\n             return template({d: d})\n         })\n\n    $('.myviz').html('<svg width=\"100%\" height=\"100%\">' + result + '</svg>')\n}\n\n$('button#viz').click(function(){    \n    var state = $('input#state').val()\n    var city = $('input#city').val()\n    var category = $('input#category').val() \n    var attributes = $('input#attributes').val()\n    viz(state, city, category, attributes)\n})"</script></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../learning/week8/q1.html" class="navigation navigation-prev " aria-label="Previous page: Q1"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../learning/week8/q3.html" class="navigation navigation-next " aria-label="Next page: Q3"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-bigdata/bigdata.js"></script>
    

    
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-bigdata/jquery.jsonview.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"bigdata":{},"toggle-chapters":{},"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book <i>HCI Big Data Course - Weeks 7-8</i> -->
</html>
